!function($){$(window).load(function(){function addErrorStyles(item){item.css({border:"2px solid rgba(255, 0, 0, 0.53)","box-shadow":"none"})}function removeErrorStyles(item){item.css({border:"1px solid rgb(166, 166, 166)","box-shadow":"none"})}function getSubmenuValue(){if(""===$(correctBlock1+" select:eq(0)").val()){$(correctBlock1+" select:first").addClass("error");var cssitem=$(correctBlock1+" select");return addErrorStyles(cssitem),!1}var $nonemptyselect=$(correctBlock1+" select:not(:first)").filter(function(){return""!==this.value});if($nonemptyselect.length>0)return isSelectValueValid=!0,!0;isSelectValueValid=!1,$(correctBlock1+" select:not(:first,:hidden)").addClass("error");var cssitem=$(correctBlock1+" select:not(:first,:hidden)");addErrorStyles(cssitem)}function testChange(){if($(correctBlock1+" select").hasClass("error")){var cssitem=$(correctBlock1+" select");removeErrorStyles(cssitem)}}function noMenu(){return isSelectValueValid=!0,!0}function getMenuValue(){var value=$(correctBlock1+" select:eq(0)").val();if(console.log("Fired before IF. Value is "+value),""!=value)return console.log("Treated the value as Null under MenuValue"),isSelectValueValid=!0,!0;$(correctBlock1+" select").addClass("error");var cssitem=$(correctBlock1+" select");return addErrorStyles(cssitem),!1}function noInputs(){return areInputsValid=!0,!0}function getInputValues(){var $nonempty=$(correctBlock1+" .validate").filter(function(){return""===this.value});return 0===$nonempty.length?(areInputsValid=!0,!0):(areInputsValid=!1,void addErrorClass())}function addErrorClass(){$(correctBlock1+" input").each(function(){""===$(this).val().trim()&&$(this).addClass("error")})}function goToNext(){var current=$(correctBlock1+" .next").data("currentBlock"),next=$(correctBlock1+" .next").data("nextBlock");$(".block"+current).removeClass("show").addClass("hidden"),$(".block"+next).removeClass("hidden").addClass("show")}function goToPrev(){var current=$(correctBlock2+" .next").data("currentBlock"),next=$(correctBlock2+" .next").data("nextBlock");console.log(current),console.log(next),$(".block"+current).removeClass("show").addClass("hidden"),$(".block"+next).removeClass("hidden").addClass("show")}function checkForm(){selectfunc(),inputfunc(),isSelectValueValid===!0&&areInputsValid===!0&&goToNext()}var selectfunc,inputfunc,isSelectValueValid,areInputsValid,correctBlock1,correctBlock2;$("#form-modal")&&($("#form-modal #step-form").addClass("modal"),$("#form-modal").hasClass("active")?(correctBlock1="#step-form.modal .block1",correctBlock2="#step-form.modal .block2"):(correctBlock1="#step-form:not(.modal) .block1",correctBlock2="#step-form:not(.modal) .block2")),$(correctBlock1+" select option:selected").attr("value",""),selectfunc=$(correctBlock1+"  select").length>1?getSubmenuValue:0===$(correctBlock1+" select").length?noMenu:getMenuValue,inputfunc=0===$(correctBlock1+" .validate").length?noInputs:getInputValues,$(correctBlock1+" select").change(testChange),$(correctBlock1+" .btn").click(checkForm),$(correctBlock2+" .pull-left").click(goToPrev),$(correctBlock1+"input:not(:last)").keypress(function(evt){if(13==evt.keyCode){evt.preventDefault();var fields=$(this).parents("form:eq(0),body").find("button, input, textarea, select"),index=fields.index(this);return index>-1&&index+1<fields.length&&fields.eq(index+1).focus(),!1}}),$(correctBlock1+"input:last").keypress(function(e){13==e.keyCode&&(e.preventDefault(),$(".next").get(0).click(),$(correctBlock2+" input:first").focus())}),$(correctBlock2+" input:not(:last)").keypress(function(evt){if(13==evt.keyCode){evt.preventDefault();var fields=$(this).parents("form:eq(0),body").find("button, input, textarea, select"),index=fields.index(this);return index>-1&&index+1<fields.length&&fields.eq(index+1).focus(),!1}}),$(correctBlock2+" input:last").keypress(function(e){13==e.keyCode&&(e.preventDefault(),$("input[type='submit']").get(0).click())})})}(jQuery);